<!DOCTYPE HTML>
<html lang="en">
    <head>
        
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title> | Kadalu </title>
<link href="/static/css/fav.png" rel="icon" type="image/x-icon" />
<link rel="apple-touch-icon" href="/static/css/fav.png" />
<meta name="generator" content="Nanoc 4.12.1">
<meta property="og:title" content=""/>
<meta name="author" content=""/>
<meta property="og:locale" content="en_US"/>
<meta name="description" content=""/>
<meta property="og:description" content=""/>
<link rel="canonical" href="/docs/kadalu-storage/latest/config-snapshots/"/>
<meta property="og:url" content="/docs/kadalu-storage/latest/config-snapshots/"/>
<meta property="og:site_name" content="Kadalu"/>
<meta property="og:image" content=""/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content=""/>
<meta name="twitter:card" content="summary_large_image"/>
<meta property="twitter:image" content=""/>
<meta property="twitter:title" content=""/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="/static/css/stylesheet.css">
<link rel="stylesheet" href="/static/css/syntax-highlight-emacs.css">
<script defer data-domain="kadalu.io" src="https://plausible.io/js/plausible.js"></script>
<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.2/dist/alpine.min.js" defer></script>

    </head>
    <body>
        

<div class="bg-indigo-900">
    <div class="w-full px-5  m-auto py-5">
        <div class="lg:grid lg:grid-cols-12" x-data="{ menuOpen : false }">
            <div class="col-span-4 lg:col-span-2" style="height:40px">
                <a href="/"><img src="/static/css/logo.png" class="h-10 float-left" /></a>
                <button @click="menuOpen = !menuOpen" class="block absolute md:hidden right-7 top-5 w-8 h-8 text-gray-200 p-1">
                    <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                </button>
            </div>
            <div class="pt-2 col-span-8 lg:col-span-10">
                <nav class="absolute md:relative top-16 left-0 md:top-0 z-20 md:flex flex-col-reverse md:flex-row-reverse md:space-x-3 font-semibold w-full md:w-auto bg-indigo-900 shadow-md rounded-lg md:rounded-none md:shadow-none md:bg-transparent p-6 pt-5 md:p-0"
                     :class="{ 'flex' : menuOpen , 'hidden' : !menuOpen}"  @click.away="menuOpen = false"
                >
                    <a href="/blog" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Blog</a>
                    <a href="/opensource" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Open Source</a>
                    <a href="/docs" class="bg-gray-900 text-white py-2 px-3 rounded-md text-sm font-medium">Docs</a>
                </nav>
            </div>
        </div>
    </div>
</div>

        
        <div class="flex flex-col md:grid md:grid-cols-12 w-full" x-data="{docMenuOpen: false}">
            <div class="col-span-3 bg-gray-100" :class="{ 'block mr-10' : docMenuOpen , 'hidden md:block' : !docMenuOpen}" @click.away="docMenuOpen = false">
                <div class="py-5 px-5">
                    
                    <div class="p-5 bg-gray-200 border text-right rounded-lg">
                        <strong>Version: </strong>
                        <select class="input-field" onchange="location = '/docs/kadalu-storage/' + this.value;">
                            <option selected value="latest">latest</option>
                            
                            <option  value="main">main</option>
                            
                        </select>
                    </div>
                    
                    <h2 class="text-xl font-semibold mt-7">User Guide</h2>
                    <ul>
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/kadalu-storage/latest/quick-start/">Quick Start</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/kadalu-storage/latest/container-based-setup/">Container Based Setup</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/kadalu-storage/latest/introduction/">Introduction</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/kadalu-storage/latest/install/">Install</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/kadalu-storage/latest/user-management/">User Management</a></li>
                        
                        
                        
                        
                        <li class="text-indigo-600 font-semibold py-2 md:py-0">Config Snapshots</li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/kadalu-storage/latest/pools/">Pools</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/kadalu-storage/latest/volumes/">Volumes</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/kadalu-storage/latest/faqs/">FAQs</a></li>
                        
                        
                    </ul>
                    
                    
                    
                </div>
            </div>
            <div id="main" class="col-span-9">
                <div class="py-5 px-10">
                    
                    <div class="mb-10">
                        <span class="inline-block font-semibold text-gray-700 py-1 text-xl">
                            <a href="/">
                                <svg class="w-6 h-6 inline-block" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg></a> / <a href="/docs/kadalu-storage">kadalu-storage</a> / <a href="/docs/kadalu-storage/latest">latest</a> / config-snapshots/</span>
                    </div>
                    
                    <button @click="docMenuOpen = !docMenuOpen" class="block md:hidden w-8 h-8 text-gray-600 mb-5">
                        <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                    </button>
                    <div class="mb-24 prose max-w-none prose-indigo">
                        <h1>Config Snapshots</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Kadalu Storage configurations are only stored in Manager node, all the other nodes are agent nodes. Periodic backup of configuration data helps to recover Manager node failures.</p>
</div>
<div class="paragraph">
<p>Kadalu Storage provides configuration snapshot APIs. Easily schedule backup of Storage configurations using these APIs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_config_snapshot">Create Config Snapshot</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use below command to create a Snapshot.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kadalu config-snapshot create &lt;name&gt; [--overwrite]</pre>
</div>
</div>
<div class="paragraph">
<p>For example, to create a rolling hourly Snapshot:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kadalu config-snapshot create hourly-`date +%H` --overwrite</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_listing_the_config_snapshots">Listing the Config Snapshots</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use <code>list</code> command to see the list of Config Snapshots.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ kadalu config-snapshots list</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_restore_the_configs_from_a_snapshot">Restore the configs from a Snapshot</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a Manager node goes down and the new replacement node is required, download the latest available backup and restore from it. Make sure to use the same hostname as the previous mgr node.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kadalu config-snapshot restore &lt;name&gt; [--from-dir=PATH]</pre>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ kadalu config-snapshot restore hourly-20 --from-dir=/root/backups</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_delete_a_config_snapshot">Delete a config Snapshot</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use delete command to delete a Configuration backup when not required.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ kadalu config-snapshot delete hourly-20</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_backup">Backup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Configuration Snapshots are stored under <code>/var/lib/kadalu/config-snapshots</code> directory. Copy to remote node to avoid losing all the Configuration data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cd /var/lib/kadalu/config-snapshots &amp;&amp; tar cvzf hourly-20.tar.gz hourly-20/
scp /var/lib/kadalu/config-snapshots/hourly-20.tar.gz root@backup-server:/backups/</pre>
</div>
</div>
</div>
</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-gray-800 text-gray-100 py-10">
    <div class="mx-auto w-full px-5 " style="min-height: 40vh">
        <div class="md:grid gap-2 md:grid-cols-4 md:gap-4">
            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Community</h2>
                <ul>
                    <li><a href="/opensource">Open Source</a></li>
                    <li><a href="https://join.slack.com/t/kadalu/shared_invite/enQtNzg1ODQ0MDA5NTM2LWMzMTc5ZTJmMjk4MzI0YWVhOGFlZTJjZjY5MDNkZWI0Y2VjMDBlNzVkZmI1NWViN2U3MDNlNDJhNjE5OTBlOGU">Slack</a></li>
                    <li><a href="https://github.com/kadalu">Github</a></li>
                </ul>
            </div>

            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Learn</h2>
                <ul>
                    <li><a href="/docs">Documentation</a></li>
                    <li><a href="/blog">Blog</a></li>
                    <li><a href="/faq">FAQ</a></li>
                    <li><a href="/rfcs">RFCs</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="bg-gray-800 text-gray-100 py-10">
    <div class="mx-auto w-3/4 text-center text-gray-300 mb-10">
        &copy; 2022 Kadalu Community(https://github.com/kadalu). All Rights Reserved.
    </div>
</div>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-144588868-2"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-144588868-2');
</script>


    </body>
</html>
