<!DOCTYPE HTML>
<html lang="en">
    <head>
        
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title> | Kadalu </title>
<link href="/static/css/fav.png" rel="icon" type="image/x-icon" />
<link rel="apple-touch-icon" href="/static/css/fav.png" />
<meta name="generator" content="Nanoc 4.12.1">
<meta property="og:title" content=""/>
<meta name="author" content=""/>
<meta property="og:locale" content="en_US"/>
<meta name="description" content=""/>
<meta property="og:description" content=""/>
<link rel="canonical" href="/docs/k8s-storage/devel/try-kadalu/"/>
<meta property="og:url" content="/docs/k8s-storage/devel/try-kadalu/"/>
<meta property="og:site_name" content="Kadalu"/>
<meta property="og:image" content=""/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content=""/>
<meta name="twitter:card" content="summary_large_image"/>
<meta property="twitter:image" content=""/>
<meta property="twitter:title" content=""/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="/static/css/stylesheet.css">
<link rel="stylesheet" href="/static/css/syntax-highlight-emacs.css">
<script defer src="https://unpkg.com/alpinejs@3.2.2/dist/cdn.min.js"></script>

    </head>
    <body>
        

<div class="bg-indigo-900">
    <div class="w-full px-5  m-auto py-5">
        <div class="lg:grid lg:grid-cols-12" x-data="{ menuOpen : false }">
            <div class="col-span-4 lg:col-span-2" style="height:40px">
                <a href="/"><img src="/static/css/logo.png" class="h-10 float-left" /></a>
                <button @click="menuOpen = !menuOpen" class="block absolute md:hidden right-7 top-5 w-8 h-8 text-gray-200 p-1">
                    <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                </button>
            </div>
            <div class="pt-2 col-span-8 lg:col-span-10">
                <nav class="absolute md:relative top-16 left-0 md:top-0 z-20 md:flex flex-col-reverse md:flex-row-reverse md:space-x-3 font-semibold w-full md:w-auto bg-indigo-900 shadow-md rounded-lg md:rounded-none md:shadow-none md:bg-transparent p-6 pt-5 md:p-0"
                     :class="{ 'flex' : menuOpen , 'hidden' : !menuOpen}" @keyup.escape.window="menuOpen = false"
                >
                    <a href="/blog" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Blog</a>
                    <a href="/company" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Company</a>
                    <a href="/opensource" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Open Source</a>
                    <a href="/services" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Services</a>
                    <a href="/products" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Products</a>
                    <a href="/docs" class="bg-gray-900 text-white py-2 px-3 rounded-md text-sm font-medium">Docs</a>
                </nav>
            </div>
        </div>
    </div>
</div>

        
        <div class="flex flex-col md:grid md:grid-cols-12 w-full" x-data="{docMenuOpen: false}">
            <div class="col-span-3 bg-gray-100" :class="{ 'block mr-10' : docMenuOpen , 'hidden md:block' : !docMenuOpen}" @click.away="docMenuOpen = false">
                <div class="py-5 px-5">
                    
                    <div class="p-5 bg-gray-200 border text-right rounded-lg">
                        <strong>Version: </strong>
                        <select class="input-field" onchange="location = '/docs/k8s-storage/' + this.value;">
                            <option  value="latest">latest</option>
                            
                            <option selected value="devel">devel</option>
                            
                        </select>
                    </div>
                    
                    <h2 class="text-xl font-semibold mt-7">User Guide</h2>
                    <ul>
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/quick-start/">Quick Start</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/introduction/">Introduction</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/setup/">Setup</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/setup-storage/">Setup Storage</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/csi-to-claim-persistent-volumes/">CSI to claim Persistent Volumes</a></li>
                        
                        
                        
                        
                        <li class="text-indigo-600 font-semibold py-2 md:py-0">Try Kadalu</li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/external-gluster-storage/">External Gluster Storage</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/storage-config-options/">Storage Config Options</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/storage-classes/">Storage Classes</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/troubleshooting/">Troubleshooting</a></li>
                        
                        
                    </ul>
                    
                    <h2 class="text-xl font-semibold mt-7">Use cases</h2>
                    <ul>
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/running-a-webserver/">Running a Webserver</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/running-minio/">Running Minio</a></li>
                        
                        
                    </ul>
                    
                    <h2 class="text-xl font-semibold mt-7">Articles</h2>
                    <ul>
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/how-it-works?/">How it works?</a></li>
                        
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/gluster-and-kadalu/">Gluster and Kadalu</a></li>
                        
                        
                    </ul>
                    
                    <h2 class="text-xl font-semibold mt-7">Developer Guide</h2>
                    <ul>
                        
                        
                        
                        <li class="py-2 md:py-0"><a href="/docs/k8s-storage/devel/get-involved/">Get Involved</a></li>
                        
                        
                    </ul>
                    
                    
                    
                </div>
            </div>
            <div id="main" class="col-span-9">
                <div class="py-5 px-10">
                    
                    <div class="mb-10">
                        <span class="inline-block font-semibold text-gray-700 py-1 text-xl">
                            <a href="/">
                                <svg class="w-6 h-6 inline-block" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg></a> / <a href="/docs/k8s-storage">k8s-storage</a> / <a href="/docs/k8s-storage/devel">devel</a> / try-kadalu/</span>
                    </div>
                    
                    <button @click="docMenuOpen = !docMenuOpen" class="block md:hidden w-8 h-8 text-gray-600 mb-5">
                        <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                    </button>
                    <div class="mb-24 prose max-w-none prose-indigo">
                        <h1>Try Kadalu</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>We believe the success of a project depends on  how easy it is for a developer
or an user to try out the project, get a hang of it.</p>
</div>
<div class="paragraph">
<p>As part of that, we have decided the overall install process of the storage
system should be 2 step process.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get the operator installed, which sets up required configmap, CSI drivers,
and CRD details.</p>
</li>
<li>
<p>Provide inventory (ie, machine:disk combination) to the system, so it can
setup storage subsystem on it.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the initial versions, we would like to keep the 2nd step manual, ie, admin
has to provide details of storage. Later, we can enhance it to pick the
storage based on the tag etc. If it is cloud, with required auth keys,
it can setup the Storage within operator itself.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_give_it_a_try_with_minikube">Give it a try with 'minikube'</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://kubernetes.io/docs/setup/minikube/">minikube</a> is a good way to get a hang of k8s for beginners. If you already have a k8s setup available to test out, skip this step, and goto <a href="#try-kadalu">Next step</a></p>
</div>
<div class="paragraph">
<p>You can follow <a href="https://kubernetes.io/docs/tasks/tools/install-minikube/">Install minikube</a> document to setup minikube. Please note that if you are using <code>minikube version</code> below 1.17.0, use <code>--vm-driver=none</code> option. More on this issue is recorded at <a href="https://github.com/kadalu/kadalu/issues/351">kadalu/issue#351</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_try_kadalu">Try kadalu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For testing, login to minikube and create a virtual device as below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span><span class="nb">cd</span> /mnt/vda1/
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo truncate</span> <span class="nt">-s</span> 10G storage-pool-1.disk.img</code></pre>
</div>
</div>
<div class="paragraph">
<p>After this follow our <a href="https://github.com/kadalu/kadalu">Homepage</a>. You are good to get started.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_further_considerations">Further considerations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_what_do_we_do_when_we_have_more_storage_nodes">What do we do when we have more storage nodes?</h3>
<div class="paragraph">
<p>We understand many examples given are for setting up it on 1 node, 1 device. When you have more storage you need to export, then just export more storage in the multiple of Replica count.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="c1"># File: storage-config.yaml</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kadalu-operator.storage/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">KadaluStorage</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="c1"># This will be used as name of PV Hosting Volume</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">storage-pool-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">Replica1</span>
  <span class="na">storage</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube1</span>        <span class="c1"># node name as shown in `kubectl get nodes`</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdc</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube2</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdd</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube3</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdc</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you are using kadalu versions below 0.8.0, then please refer to document on 0.7.7 version.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_configure_kadalu_to_have_at_least_one_mirroring_data_in_case_of_some_crash">how to configure kadalu to have at least one mirroring data in case of some crash?</h3>
<div class="paragraph">
<p>The answer we have is, providing kadalu-config using 3 nodes, and using gluster replicate module (replica 3). The sample looks something like below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="c1"># File: storage-config.yaml</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kadalu-operator.storage/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">KadaluStorage</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="c1"># This will be used as name of PV Hosting Volume</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">storage-replica-pool-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">Replica3</span>  <span class="c1"># Notice that this field tells kadalu operator to use replicate module.</span>
  <span class="na">storage</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube1</span>      <span class="c1"># node name as shown in `kubectl get nodes`</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdc</span> <span class="c1"># Device to provide storage to all PV</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube2</span>      <span class="c1"># node name as shown in `kubectl get nodes`</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdd</span> <span class="c1"># Device to provide storage to all PV</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube3</span>      <span class="c1"># node name as shown in `kubectl get nodes`</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdc</span> <span class="c1"># Device to provide storage to all PV</span>
<span class="nn">---</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With this, there will be 3 bricks, and kadalu CSI driver will mount the corresponding volume and provide data.</p>
</div>
<div class="paragraph">
<p><strong>NOTE</strong>: There can be both replica1 and replica3 type volume co-existing in the system. Note that while claiming the PV, you just need to provide <code>storageClassName: kadalu.replica1</code> or <code>storageClassName: kadalu.replica3</code> to use the relevant option.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_data_recovery">On data recovery</h3>
<div class="paragraph">
<p>As we use glusterfs as storage backend, without any sharding/striping/disperse mode, the data remains as is, on your backend storage. Just that each PV would be a subdirectory on your storage. So, no need to panic.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_upgrade">On upgrade</h3>
<div class="paragraph">
<p>As long as glusterfs promises to keep the backend layout same, and continue to provide storage after upgrade, we don&#8217;t see any issue with upgrade. Currently one known issue is that our operator is not checking for heal pending count while upgrading storage pods.</p>
</div>
</div>
<div class="sect2">
<h3 id="_gluster_and_kadalu">Gluster and Kadalu</h3>
<div class="paragraph">
<p>We have compiled a list of things <a href="/docs/k8s-storage/devel/gluster-and-kadalu">here</a></p>
</div>
</div>
</div>
</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bg-gray-800 text-gray-100 py-10">
    <div class="mx-auto w-full px-5 " style="min-height: 40vh">
        <div class="md:grid gap-2 md:grid-cols-4 md:gap-4">
            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Kadalu</h2>
                <ul>
                    <li><a href="/products#k8s-native-storage">Kubernetes native Storage</a></li>
                    <li><a href="/products#kadalu-storage">Kadalu Storage</a></li>
                    <li><a href="/products#glusterup">GlusterFS monitoring</a></li>
                    <li><a href="/services">Services</a></li>
                    <li><a href="/services#features">Feature development</a></li>
                    <li><a href="/services#upgrade">Upgrade assistance</a></li>
                    <li><a href="/services#consultancy">Consultancy</a></li>
                    <li><a href="/security">Security</a></li>
                </ul>
            </div>

            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Community</h2>
                <ul>
                    <li><a href="/opensource">Open Source</a></li>
                    <li><a href="https://join.slack.com/t/kadalu/shared_invite/enQtNzg1ODQ0MDA5NTM2LWMzMTc5ZTJmMjk4MzI0YWVhOGFlZTJjZjY5MDNkZWI0Y2VjMDBlNzVkZmI1NWViN2U3MDNlNDJhNjE5OTBlOGU">Slack</a></li>
                    <li><a href="https://github.com/kadalu">Github</a></li>
                    <!-- <li><a href="/office-hours">Office Hours</a></li> -->
                </ul>
            </div>

            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Learn</h2>
                <ul>
                    <li><a href="/docs">Documentation</a></li>
                    <li><a href="/blog">Blog</a></li>
                    <li><a href="/faq">FAQ</a></li>
                    <li><a href="/rfcs">RFCs</a></li>
                    <!-- <li><a href="/compare">Compare</a></li> -->
                </ul>
            </div>

            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Company</h2>
                <ul>
                    <li><a href="/company">About</a></li>
                    <li><a href="/contact">Contact</a></li>
                    <li><a href="/sitemap.xml">Sitemap</a></li>
                </ul>

                <h2 class="text-xl font-semibold text-indigo-300 mt-10">Write to us</h2>
                <ul>
                    <li><a href="mailto:hello@kadalu.io"><svg class="w-4 h-4 inline-block mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg>hello@kadalu.io</a></li>
                </ul>

                <h2 class="text-xl font-semibold text-indigo-300 mt-10">Follow Us</h2>
                <ul>
                    <li><a href="https://twitter.com/kadaluio">Twitter</a></li>
                    <li><a href="https://linkedin.com/company/kadalu-io">Linkedin</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="bg-gray-800 text-gray-100 py-10">
    <div class="mx-auto w-3/4 text-center text-gray-300 mb-10">
        &copy; 2021 Kadalu Software Private Limited. All Rights Reserved.
    </div>
</div>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-144588868-2"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-144588868-2');
</script>


    </body>
</html>
