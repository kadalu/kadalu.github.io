<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="utf-8">
        
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Importing a Gluster Volume to Kadalu Storage | Kadalu </title>
<link href="/static/css/fav.png" rel="icon" type="image/x-icon" />
<link rel="apple-touch-icon" href="/static/css/fav.png" />
<meta name="generator" content="Nanoc 4.12.1">
<meta property="og:title" content="Importing a Gluster Volume to Kadalu Storage"/>
<meta name="author" content="aravindavk"/>
<meta property="og:locale" content="en_US"/>
<meta name="description" content="Gluster Storage and Kadalu Storage share the same filesystem backend that is GlusterFS. Which makes it natural to think about migrating a Gluster Volume to Kadalu Volume."/>
<meta property="og:description" content="Gluster Storage and Kadalu Storage share the same filesystem backend that is GlusterFS. Which makes it natural to think about migrating a Gluster Volume to Kadalu Volume."/>
<link rel="canonical" href="/blog/importing-a-gluster-volume-to-kadalu-storage/"/>
<meta property="og:url" content="/blog/importing-a-gluster-volume-to-kadalu-storage/"/>
<meta property="og:site_name" content="Kadalu"/>
<meta property="og:image" content="/static/images/import-gluster-volume.png"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2022-01-25"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta property="twitter:image" content="/static/images/import-gluster-volume.png"/>
<meta property="twitter:title" content="Importing a Gluster Volume to Kadalu Storage"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="/static/css/stylesheet.css">
<link rel="stylesheet" href="/static/css/syntax-highlight-emacs.css">
<script defer data-domain="kadalu.io" src="https://plausible.io/js/plausible.js"></script>
<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.2/dist/alpine.min.js" defer></script>

    </head>
    <body>
        

<div class="bg-indigo-900">
    <div class="w-full px-5 px-10 md:w-3/4 md:px-0 m-auto py-5">
        <div class="lg:grid lg:grid-cols-12" x-data="{ menuOpen : false }">
            <div class="col-span-4 lg:col-span-2" style="height:40px">
                <a href="/"><img src="/static/css/logo.png" class="h-10 float-left" /></a>
                <button @click="menuOpen = !menuOpen" class="block absolute md:hidden right-7 top-5 w-8 h-8 text-gray-200 p-1">
                    <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                </button>
            </div>
            <div class="pt-2 col-span-8 lg:col-span-10">
                <nav class="absolute md:relative top-16 left-0 md:top-0 z-20 md:flex flex-col-reverse md:flex-row-reverse md:space-x-3 font-semibold w-full md:w-auto bg-indigo-900 shadow-md rounded-lg md:rounded-none md:shadow-none md:bg-transparent p-6 pt-5 md:p-0"
                     :class="{ 'flex' : menuOpen , 'hidden' : !menuOpen}"  @click.away="menuOpen = false"
                >
                    <a href="/blog" class="bg-gray-900 text-white py-2 px-3 rounded-md text-sm font-medium">Blog</a>
                    <a href="/company" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Company</a>
                    <a href="/opensource" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Open Source</a>
                    <a href="/services" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Services</a>
                    <a href="/products" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Products</a>
                    <a href="/docs" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Docs</a>
                </nav>
            </div>
        </div>
    </div>
</div>

        <div class="py-10">
            <div id="main" class="mx-auto w-full px-10 md:w-3/4 md:px-0 mb-10">
                <div class="grid grid-cols-12 gap-4">
                    <div class="col-span-9 prose max-w-none prose-indigo">
                        <h1>Importing a Gluster Volume to Kadalu Storage</h1>
                        
                        
                        <div class="text-gray-500 text-sm mb-1">Posted on <strong>Jan 25, 2022</strong> by <strong>Aravinda Vishwanathapura</strong></div>
                        <div class="text-gray-600 text-sm mb-7">
                            <svg class="w-6 h-6 inline-block mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>
                            3 minutes read.
                        </div>
                        <div class="paragraph">
<p>This post is the second part of the Kadalu Storage introduction series.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://kadalu.io/blog/kadalu-storage-part-1/">Part 1 - Volume create CLI enhancements</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Gluster Storage and Kadalu Storage share the same filesystem backend that is GlusterFS. Which makes it natural to think about migrating a Gluster Volume to Kadalu Volume.</p>
</div>
<div class="paragraph">
<p>Luckily both Kadalu Storage and Gluster Storage can co-exist. To experience Kadalu Storage, you can identify one Volume from the Gluster Cluster and migrate it to Kadalu Storage. At the end of this blog post I will also show how you can go back to Gluster&#8217;s way of managing that Volume.</p>
</div>
<div class="paragraph">
<p>Create a Volume in Gluster Cluster (I am skipping all the Peer probe steps and directly jump to creating the Volume)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">#</span><span class="w"> </span>gluster volume create vol1 replica 3   <span class="se">\</span>
    server1.example.com:/exports/vol1/s1 <span class="se">\</span>
    server2.example.com:/exports/vol1/s2 <span class="se">\</span>
    server3.example.com:/exports/vol1/s3</code></pre>
</div>
</div>
<div class="paragraph">
<p>Gluster CLI doesn&#8217;t support importing or creating a volume by specifying volume ID. Do not delete the Gluster Volume after migrating to Kadalu Storage. Keep the Gluster Volume in Stopped state.</p>
</div>
<div class="paragraph">
<p>Start Kadalu Storage manager in all Gluster Storage nodes, in this example Start in server1, server2 and server3.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">#</span><span class="w"> </span>systemctl <span class="nb">enable </span>kadalu-mgr
<span class="gp">#</span><span class="w"> </span>systemctl start kadalu-mgr</code></pre>
</div>
</div>
<div class="paragraph">
<p>Login to any one server and create a Storage Pool, Example <code>PROD</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">server1#</span><span class="w"> </span>kadalu pool create PROD</code></pre>
</div>
</div>
<div class="sect1">
<h2 id="_manual_migration">Manual Migration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Get the Volume ID by running the command, gluster volume info vol1. And use that Volume ID with Kadalu command as shown below (Note the Brick paths are unchanged)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>kadalu volume create PROD/vol1                     <span class="se">\</span>
      replica server1.example.com:/exports/vol1/s1   <span class="se">\</span>
              server2.example.com:/exports/vol1/s2   <span class="se">\</span>
              server3.example.com:/exports/vol1/s3   <span class="se">\</span>
    <span class="nt">--volume-id</span> ea4fc0b9-f63b-4621-8c50-838e02ef08df</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_migration_helper">Using migration Helper</h2>
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="/static/images/import-gluster-volume.png" alt="Import Gluster Volume">
</div>
</div>
<div class="paragraph">
<p>Run the Gluster Volume info XML and then pipe it to the Kadalu Volume create command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">#</span><span class="w"> </span>gluster volume info vol1 <span class="nt">--xml</span> | kadalu volume create PROD/- <span class="se">\</span>
    <span class="nt">--auto-add-nodes</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This helper parses the Volume info and understands the Volume options used, type of Volume and many other details to recreate the Kadalu Volume. (<strong>Note</strong>: Volume Options support is a upcoming feature of Kadalu Storage)</p>
</div>
<div class="paragraph">
<p>If the node names used for Gluster are different from the ones to use with Kadalu then use the <code>--node-map</code> option.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">#</span><span class="w"> </span>gluster volume info vol1 <span class="nt">--xml</span> | kadalu volume create PROD/- <span class="se">\</span>
    <span class="nt">--auto-add-nodes</span>                                           <span class="se">\</span>
    <span class="nt">--node-map</span><span class="o">=</span><span class="s2">"server1.example.com=node1.example.com"</span>         <span class="se">\</span>
    <span class="nt">--node-map</span><span class="o">=</span><span class="s2">"server2.example.com=node2.example.com"</span>         <span class="se">\</span>
    <span class="nt">--node-map</span><span class="o">=</span><span class="s2">"server3.example.com=node3.example.com"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To import all Volumes,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">#</span><span class="w"> </span>gluster volume list | xargs                               <span class="se">\</span>
    gluster volume info <span class="nt">--xml</span> | kadalu volume create PROD/- <span class="se">\</span>
    <span class="nt">--auto-add-nodes</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Kadalu Volumes are started by default on creation. If you want to stop using Kadalu and move back to Glusterd based Volume management, Stop the Kadalu Volume and Start the Gluster Volume. <strong>That&#8217;s all!</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span>kadalu volume stop PROD/vol1
<span class="gp">#</span><span class="w"> </span>gluster volume start vol1</code></pre>
</div>
</div>
</div>
</div>
                        <p class="bg-blue-200 px-2 py-2 mb-10 rounded">Join the Kadalu team as we plan, design and develop new features. We are available on our Slack instance, <a href="https://join.slack.com/t/kadalu/shared_invite/enQtNzg1ODQ0MDA5NTM2LWMzMTc5ZTJmMjk4MzI0YWVhOGFlZTJjZjY5MDNkZWI0Y2VjMDBlNzVkZmI1NWViN2U3MDNlNDJhNjE5OTBlOGU">https://kadalu.slack.com</a>.</p>
                    </div>
                    <div class="col-span-3">
                        <div class="mt-20 text-center">
                            <img class="rounded-full mb-5 mx-auto" style="width:150px;height:150px" src="https://github.com/aravindavk.png?size=300px"/>
                            <h2 class="font-semibold text-center">Aravinda Vishwanathapura</h2>
                            
                            <p>Kadalu Maintainer</p>
                            
                            <p>
                                
                                <a class="mr-2 text-indigo-600" href="https://aravindavk.in">Website</a>|
                                
                                
                                <a class="mx-2 text-indigo-600" href="https://twitter.com/aravindavk">Twitter</a>|
                                
                                <a class="ml-2 text-indigo-600" href="https://github.com/aravindavk">Github</a>
                            </p>
                        </div>
                    </div>
            </div>
        </div>
        <div class="bg-gray-800 text-gray-100 py-10">
    <div class="mx-auto w-full px-5 px-10 md:w-3/4 md:px-0" style="min-height: 40vh">
        <div class="md:grid gap-2 md:grid-cols-4 md:gap-4">
            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Kadalu</h2>
                <ul>
                    <li><a href="/products#k8s-native-storage">Kubernetes native Storage</a></li>
                    <li><a href="/products#kadalu-storage">Kadalu Storage</a></li>
                    <li><a href="/products#glusterup">GlusterFS monitoring</a></li>
                    <li><a href="/services">Services</a></li>
                    <li><a href="/services#features">Feature development</a></li>
                    <li><a href="/services#upgrade">Upgrade assistance</a></li>
                    <li><a href="/services#consultancy">Consultancy</a></li>
                    <li><a href="/security">Security</a></li>
                </ul>
            </div>

            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Community</h2>
                <ul>
                    <li><a href="/opensource">Open Source</a></li>
                    <li><a href="https://join.slack.com/t/kadalu/shared_invite/enQtNzg1ODQ0MDA5NTM2LWMzMTc5ZTJmMjk4MzI0YWVhOGFlZTJjZjY5MDNkZWI0Y2VjMDBlNzVkZmI1NWViN2U3MDNlNDJhNjE5OTBlOGU">Slack</a></li>
                    <li><a href="https://github.com/kadalu">Github</a></li>
                    <!-- <li><a href="/office-hours">Office Hours</a></li> -->
                </ul>
            </div>

            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Learn</h2>
                <ul>
                    <li><a href="/docs">Documentation</a></li>
                    <li><a href="/blog">Blog</a></li>
                    <li><a href="/faq">FAQ</a></li>
                    <li><a href="/rfcs">RFCs</a></li>
                    <!-- <li><a href="/compare">Compare</a></li> -->
                </ul>
            </div>

            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Company</h2>
                <ul>
                    <li><a href="/company">About</a></li>
                    <li><a href="/contact">Contact</a></li>
                    <li><a href="/sitemap.xml">Sitemap</a></li>
                </ul>

                <h2 class="text-xl font-semibold text-indigo-300 mt-10">Write to us</h2>
                <ul>
                    <li><a href="mailto:hello@kadalu.io"><svg class="w-4 h-4 inline-block mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg>hello@kadalu.io</a></li>
                </ul>

                <h2 class="text-xl font-semibold text-indigo-300 mt-10">Follow Us</h2>
                <ul>
                    <li><a href="https://twitter.com/kadaluio">Twitter</a></li>
                    <li><a href="https://linkedin.com/company/kadalu-io">Linkedin</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="bg-gray-800 text-gray-100 py-10">
    <div class="mx-auto w-3/4 text-center text-gray-300 mb-10">
        &copy; 2022 Kadalu Software Private Limited. All Rights Reserved.
    </div>
</div>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-144588868-2"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-144588868-2');
</script>


    </body>
</html>
