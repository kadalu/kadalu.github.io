<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="utf-8">
        
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Introducing Kadalu Storage - Part 1 | Kadalu </title>
<link href="/static/css/fav.png" rel="icon" type="image/x-icon" />
<link rel="apple-touch-icon" href="/static/css/fav.png" />
<meta name="generator" content="Nanoc 4.12.1">
<meta property="og:title" content="Introducing Kadalu Storage - Part 1"/>
<meta name="author" content="aravindavk"/>
<meta property="og:locale" content="en_US"/>
<meta name="description" content="After facing many challenges with Glusterd based Volume management, we experimented to integrate the GlusterFS core filesystem with Kubernetes without using Glusterd. This experiment helped us to understand that some of Gluster's capabilities are limited by the Management layer and not by the filesystem itself."/>
<meta property="og:description" content="After facing many challenges with Glusterd based Volume management, we experimented to integrate the GlusterFS core filesystem with Kubernetes without using Glusterd. This experiment helped us to understand that some of Gluster's capabilities are limited by the Management layer and not by the filesystem itself."/>
<link rel="canonical" href="/blog/kadalu-storage-part-1/"/>
<meta property="og:url" content="/blog/kadalu-storage-part-1/"/>
<meta property="og:site_name" content="Kadalu"/>
<meta property="og:image" content="/static/images/spot-the-differences-1.png"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2022-01-18"/>
<meta name="twitter:card" content="summary_large_image"/>
<meta property="twitter:image" content="/static/images/spot-the-differences-1.png"/>
<meta property="twitter:title" content="Introducing Kadalu Storage - Part 1"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <link rel="stylesheet" href="/static/css/stylesheet.css">
<link rel="stylesheet" href="/static/css/syntax-highlight-emacs.css">
<script defer data-domain="kadalu.io" src="https://plausible.io/js/plausible.js"></script>
<script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.2/dist/alpine.min.js" defer></script>

    </head>
    <body>
        

<div class="bg-indigo-900">
    <div class="w-full px-5 px-10 md:w-3/4 md:px-0 m-auto py-5">
        <div class="lg:grid lg:grid-cols-12" x-data="{ menuOpen : false }">
            <div class="col-span-4 lg:col-span-2" style="height:40px">
                <a href="/"><img src="/static/css/logo.png" class="h-10 float-left" /></a>
                <button @click="menuOpen = !menuOpen" class="block absolute md:hidden right-7 top-5 w-8 h-8 text-gray-200 p-1">
                    <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                </button>
            </div>
            <div class="pt-2 col-span-8 lg:col-span-10">
                <nav class="absolute md:relative top-16 left-0 md:top-0 z-20 md:flex flex-col-reverse md:flex-row-reverse md:space-x-3 font-semibold w-full md:w-auto bg-indigo-900 shadow-md rounded-lg md:rounded-none md:shadow-none md:bg-transparent p-6 pt-5 md:p-0"
                     :class="{ 'flex' : menuOpen , 'hidden' : !menuOpen}"  @click.away="menuOpen = false"
                >
                    <a href="/blog" class="bg-gray-900 text-white py-2 px-3 rounded-md text-sm font-medium">Blog</a>
                    <a href="/company" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Company</a>
                    <a href="/opensource" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Open Source</a>
                    <a href="/services" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Services</a>
                    <a href="/products" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Products</a>
                    <a href="/docs" class="text-gray-300 hover:bg-gray-700 hover:text-white py-4 md:py-2 px-3 rounded-md text-sm font-medium">Docs</a>
                </nav>
            </div>
        </div>
    </div>
</div>

        <div class="py-10">
            <div id="main" class="mx-auto w-full px-10 md:w-3/4 md:px-0 mb-10">
                <div class="grid grid-cols-12 gap-4">
                    <div class="col-span-9 prose max-w-none prose-indigo">
                        <h1>Introducing Kadalu Storage - Part 1</h1>
                        
                        
                        <div class="text-gray-500 text-sm mb-1">Posted on <strong>Jan 18, 2022</strong> by <strong>Aravinda Vishwanathapura</strong></div>
                        <div class="text-gray-600 text-sm mb-7">
                            <svg class="w-6 h-6 inline-block mr-1" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>
                            9 minutes read.
                        </div>
                        <div class="paragraph">
<p>Kadalu Storage is an opinionated distributed Storage solution focused on providing scalable and easy to use Volumes for Cloud, On-Premise, Kubernetes, or Raspberry Pis.</p>
</div>
<div class="paragraph">
<p>Kadalu Storage uses the core filesystem layer from the GlusterFS project. Kadalu Moana project provides a modern Storage manager on top of the GlusterFS core filesystem layer.</p>
</div>
<div class="sect1">
<h2 id="_history">History</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After facing many challenges with Glusterd based Volume management, we experimented to integrate the GlusterFS core filesystem with Kubernetes without using Glusterd. This experiment helped us to understand that some of Gluster&#8217;s capabilities are limited by the Management layer and not by the filesystem itself.</p>
</div>
<div class="paragraph">
<p>Rewriting the management layer also helped us to fix the user experience issues without worrying about backward compatibility.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_highlights_of_kadalu_storage">Highlights of Kadalu Storage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>(Warning: The list of features is huge)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Multiple Pools support</strong> - With Gluster, managing multiple Storage pools is not possible. Kadalu Storage introduced multiple Storage pool support.</p>
</li>
<li>
<p><strong>No mesh network</strong> between the Storage nodes. Upon node reboot, handshake happens only with the Manager node.</p>
</li>
<li>
<p><strong>Inbuilt Monitoring</strong> - All the Status CLIs provide rich metrics and the Storage manager provides ready-to-use Prometheus compatible metrics URL. If users are using a non-Prometheus based monitoring solution then it also provides the metrics in JSON format.</p>
</li>
<li>
<p><strong>Persistent Storage units'(Bricks) Ports</strong> - Port is assigned on Kadalu Volume creation and it will be persisted throughout the life cycle of the Volume. It is also possible to manually assign the required ports to these Storage units.</p>
</li>
<li>
<p><strong>Volume Create CLI enhancements</strong> - Kadalu Storage has eliminated many confusions and has made Volume create commands more intuitive.</p>
</li>
<li>
<p><strong>Auto Starting the Volumes on Create</strong> - Kadalu Volumes are automatically started on creation by default. Override by adding the <code>--no-start</code> flag to the Volume create command.</p>
</li>
<li>
<p><strong>ReST APIs and SDKs</strong> - Kadalu Storage provides ReST APIs for all the Storage management operations. Programming language SDKs are available for Python and Crystal. In future, more languages will be added to the list.</p>
</li>
<li>
<p><strong>User management</strong> - Kadalu Storage CLI operations are not limited to the Storage nodes. You can install Kadalu CLI in a remote machine and interact with the Storage pools. Kadalu Storage adds support for creating Storage admins, maintainers, viewers, and Clients.</p>
</li>
<li>
<p><strong>Automatic Pool creation and adding nodes to the Pool</strong> - With Kadalu Storage, you can directly jump to creating the Volume without creating a Pool or adding nodes to the Pool. Use <code>--auto-create-pool</code> and <code>--auto-add-nodes</code> to volume create command to do the needful. Automatic doesn&#8217;t mean insecure, it does all the required validations.</p>
</li>
<li>
<p><strong>Importing a Volume</strong> - While migrating a Volume from Gluster or migrating a Volume by moving disks to the new set of nodes, Kadalu Storage provides an easy option to re-create the Volume with the same Volume ID as it was before.</p>
</li>
<li>
<p><strong>Multiple node addresses</strong> - Kadalu Storage provides more control to specify a node address to use for public communication or internal activities like Heal.</p>
</li>
<li>
<p><strong>Kadalu Storage can co-exist with GlusterFS</strong> - Even though Kadalu Storage uses the core file system from Gluster, it can co-exist with Gluster. Kadalu Storage made sure that no ports or work directory will clash.</p>
</li>
<li>
<p><strong>ZFS as first-class support</strong> - Utilities to create Storage units using ZFS, Snapshot support and many configurations to make it usable with ZFS.</p>
</li>
<li>
<p><strong>Snapshot CLI enhancements</strong> - Usability improvements to make intuitive to the users.</p>
</li>
<li>
<p><strong>File and directory Snapshots</strong> using Xfs reflinks</p>
</li>
<li>
<p><strong>Geosync</strong> - New feature to sync files from main Volume to a backup volume. This uses Path-based Geo-replication instead of depending on GFID.</p>
</li>
<li>
<p><strong>[Developers] Template-based Volfile generation</strong> - This allows developers to integrate and test the new Xlator by writing a YAML file.</p>
</li>
<li>
<p><strong>Secure communication between nodes</strong> - Uses token-based authentication to communicate with other nodes.</p>
</li>
<li>
<p><strong>Showing Size of Volumes in info command</strong> - No need to mount the Volume to see the utilization and total capacity.</p>
</li>
<li>
<p><strong>Automated Tests</strong> - Tests may not be a feature of Storage but that gives the confidence to use the Storage in production.</p>
</li>
<li>
<p>The control plane can be externally hosted in Cloud - Which allows users to control the Storage pools across the data centres.</p>
</li>
<li>
<p><strong>Migration tool</strong> to import the Volumes from the Gluster Cluster</p>
</li>
<li>
<p><strong>[Developers] Easy to add a new feature</strong> - Get started working on a feature in a day or two if you are familiar with Python/Ruby.</p>
</li>
<li>
<p>Set Volume options while creating a Volume</p>
</li>
<li>
<p>Effective Quota management</p>
</li>
<li>
<p>Import/Export Storage Pool configurations</p>
</li>
<li>
<p>Multiple access modes: Fuse/NFS/Samba</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We couldn&#8217;t add all the features to the list, we will plan to write about each feature in detail in our future blog posts. The highlight of today&#8217;s blog post is Volume create CLI enhancements.</p>
</div>
<div class="paragraph">
<p>Do you remember the <a href="https://twitter.com/kadaluIO/status/1479852357148024833">Twitter post</a> about finding the three differences? This blog post will help you find those three differences If you haven&#8217;t found them yet.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/static/images/spot-the-differences-1.png" alt="Spot the three differences">
</div>
</div>
<div class="sect2">
<h3 id="_clear_separation_of_replica_or_disperse_groups_in_a_volume">Clear Separation of replica or disperse groups in a Volume</h3>
<div class="paragraph">
<p>For example, look at the two commands below. Which one is more clear?</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kadalu volume create PROD/vol1 replica 3 \
    server1.example.com:/storages/s1     \
    server2.example.com:/storages/s2     \
    server3.example.com:/storages/s3     \
    server4.example.com:/storages/s4     \
    server5.example.com:/storages/s5     \
    server6.example.com:/storages/s6</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>kadalu volume create PROD/vol1       \
    replica                          \
    server1.example.com:/storages/s1 \
    server2.example.com:/storages/s2 \
    server3.example.com:/storages/s3 \
    replica                          \
    server4.example.com:/storages/s4 \
    server5.example.com:/storages/s5 \
    server6.example.com:/storages/s6</pre>
</div>
</div>
<div class="paragraph">
<p>Users coming from Gluster may find the first syntax familiar. But the second one gives more clarity about which storage units together form a replica group. Also specifying the replica count is not necessary.</p>
</div>
<div class="paragraph">
<p>Don&#8217;t worry! Both are valid syntax in Kadalu Storage; we are not removing one in favour of the other. Your earlier scripts will continue to work.</p>
</div>
</div>
<div class="sect2">
<h3 id="_an_alternate_word_for_replica_mirror">An alternate word for replica - Mirror</h3>
<div class="paragraph">
<p>ZFS users are familiar with mirror keywords instead of a replica. We got this covered by adding a <code>mirror</code> alias to <code>replica</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kadalu volume create PROD/vol1       \
    mirror                           \
    server1.example.com:/storages/s1 \
    server2.example.com:/storages/s2 \
    server3.example.com:/storages/s3 \
    mirror                           \
    server4.example.com:/storages/s4 \
    server5.example.com:/storages/s5 \
    server6.example.com:/storages/s6</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_changes_to_arbiter_syntax">Changes to Arbiter syntax</h3>
<div class="paragraph">
<p>Arbiter Volume is a type of Kadalu Storage Volume that uses the third storage unit in the replica/mirror group for storing only metadata. We added support for the <code>arbiter</code> prefix just before specifying the Arbiter storage unit.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kadalu volume create PROD/vol1               \
    mirror                                   \
    server1.example.com:/storages/s1         \
    server2.example.com:/storages/s2         \
    arbiter server3.example.com:/storages/s3 \
    mirror                                   \
    server4.example.com:/storages/s4         \
    server5.example.com:/storages/s5         \
    arbiter server6.example.com:/storages/s6</pre>
</div>
</div>
<div class="paragraph">
<p>or Volume Type itself as Arbiter</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kadalu volume create PROD/vol1       \
    arbiter                          \
    server1.example.com:/storages/s1 \
    server2.example.com:/storages/s2 \
    server3.example.com:/storages/s3 \
    arbiter                          \
    server4.example.com:/storages/s4 \
    server5.example.com:/storages/s5 \
    server6.example.com:/storages/s6</pre>
</div>
</div>
<div class="paragraph">
<p>Again the old syntax of specifying <code>replica 2 arbiter 1</code> is supported for those who are coming from Gluster.</p>
</div>
</div>
<div class="sect2">
<h3 id="_raw_devices">Raw devices</h3>
<div class="paragraph">
<p>Can Kadalu Storage accept raw devices instead of a mounted directory as storage units? Yes. It also exposes a few options to control the filesystem creation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kadalu volume create PROD/vol1   \
    mirror                       \
    server1.example.com:/dev/vhd \
    server2.example.com:/dev/vhd \
    server3.example.com:/dev/vhd \
    mirror                       \
    server4.example.com:/dev/vhd \
    server5.example.com:/dev/vhd \
    server6.example.com:/dev/vhd</pre>
</div>
</div>
<div class="paragraph">
<p>By default, the <code>xfs</code> filesystem is created without LVM. Use below additional options to customize.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>--fs-type=xfs|ext4|zfs</code> (Default is <code>xfs</code>)</p>
</li>
<li>
<p><code>--fs-options=&#8230;&#8203;</code></p>
</li>
<li>
<p><code>--use-lvm</code> (Only applicable for <code>ext4</code> and <code>xfs</code> fs type)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_auto_start_volumes_on_create">Auto start Volumes on Create</h3>
<div class="paragraph">
<p>Why do you need an additional step to start a Volume after it is created? We fixed it. Kadalu Storage manager automatically starts the Volume on creation. Use the <code>--no-start</code> flag if this behaviour is not required. Stop and Start commands are available for future maintenance activities.</p>
</div>
<div class="paragraph">
<p>***</p>
</div>
<div class="paragraph">
<p>We will cover another feature from the list next week. Read this <a href="https://kadalu.io/docs/kadalu-storage/main/quick-start">Quickstart guide</a> to get started. Please feel free to open <a href="https://github.com/kadalu/moana/issues">issues</a> if something is not working or you have suggestions.</p>
</div>
<div class="paragraph">
<p>Please join the Kadalu community meeting happening on Jan 20th, 2022 4 pm-5 pm IST | UTC 10:30-11:30 am. Bridge Link: <a href="https://meet.google.com/jtp-kvsh-ggu" class="bare">https://meet.google.com/jtp-kvsh-ggu</a></p>
</div>
</div>
</div>
</div>
                        <p class="bg-blue-200 px-2 py-2 mb-10 rounded">Join the Kadalu team as we plan, design and develop new features. We are available on our Slack instance, <a href="https://join.slack.com/t/kadalu/shared_invite/enQtNzg1ODQ0MDA5NTM2LWMzMTc5ZTJmMjk4MzI0YWVhOGFlZTJjZjY5MDNkZWI0Y2VjMDBlNzVkZmI1NWViN2U3MDNlNDJhNjE5OTBlOGU">https://kadalu.slack.com</a>.</p>
                    </div>
                    <div class="col-span-3">
                        <div class="mt-20 text-center">
                            <img class="rounded-full mb-5 mx-auto" style="width:150px;height:150px" src="https://github.com/aravindavk.png?size=300px"/>
                            <h2 class="font-semibold text-center">Aravinda Vishwanathapura</h2>
                            
                            <p>Kadalu Maintainer</p>
                            
                            <p>
                                
                                <a class="mr-2 text-indigo-600" href="https://aravindavk.in">Website</a>|
                                
                                
                                <a class="mx-2 text-indigo-600" href="https://twitter.com/aravindavk">Twitter</a>|
                                
                                <a class="ml-2 text-indigo-600" href="https://github.com/aravindavk">Github</a>
                            </p>
                        </div>
                    </div>
            </div>
        </div>
        <div class="bg-gray-800 text-gray-100 py-10">
    <div class="mx-auto w-full px-5 px-10 md:w-3/4 md:px-0" style="min-height: 40vh">
        <div class="md:grid gap-2 md:grid-cols-4 md:gap-4">
            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Kadalu</h2>
                <ul>
                    <li><a href="/products#k8s-native-storage">Kubernetes native Storage</a></li>
                    <li><a href="/products#kadalu-storage">Kadalu Storage</a></li>
                    <li><a href="/products#glusterup">GlusterFS monitoring</a></li>
                    <li><a href="/services">Services</a></li>
                    <li><a href="/services#features">Feature development</a></li>
                    <li><a href="/services#upgrade">Upgrade assistance</a></li>
                    <li><a href="/services#consultancy">Consultancy</a></li>
                    <li><a href="/security">Security</a></li>
                </ul>
            </div>

            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Community</h2>
                <ul>
                    <li><a href="/opensource">Open Source</a></li>
                    <li><a href="https://join.slack.com/t/kadalu/shared_invite/enQtNzg1ODQ0MDA5NTM2LWMzMTc5ZTJmMjk4MzI0YWVhOGFlZTJjZjY5MDNkZWI0Y2VjMDBlNzVkZmI1NWViN2U3MDNlNDJhNjE5OTBlOGU">Slack</a></li>
                    <li><a href="https://github.com/kadalu">Github</a></li>
                    <!-- <li><a href="/office-hours">Office Hours</a></li> -->
                </ul>
            </div>

            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Learn</h2>
                <ul>
                    <li><a href="/docs">Documentation</a></li>
                    <li><a href="/blog">Blog</a></li>
                    <li><a href="/faq">FAQ</a></li>
                    <li><a href="/rfcs">RFCs</a></li>
                    <!-- <li><a href="/compare">Compare</a></li> -->
                </ul>
            </div>

            <div class="mb-10">
                <h2 class="text-xl font-semibold text-indigo-300">Company</h2>
                <ul>
                    <li><a href="/company">About</a></li>
                    <li><a href="/contact">Contact</a></li>
                    <li><a href="/sitemap.xml">Sitemap</a></li>
                </ul>

                <h2 class="text-xl font-semibold text-indigo-300 mt-10">Write to us</h2>
                <ul>
                    <li><a href="mailto:hello@kadalu.io"><svg class="w-4 h-4 inline-block mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg>hello@kadalu.io</a></li>
                </ul>

                <h2 class="text-xl font-semibold text-indigo-300 mt-10">Follow Us</h2>
                <ul>
                    <li><a href="https://twitter.com/kadaluio">Twitter</a></li>
                    <li><a href="https://linkedin.com/company/kadalu-io">Linkedin</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="bg-gray-800 text-gray-100 py-10">
    <div class="mx-auto w-3/4 text-center text-gray-300 mb-10">
        &copy; 2022 Kadalu Software Private Limited. All Rights Reserved.
    </div>
</div>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-144588868-2"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-144588868-2');
</script>


    </body>
</html>
