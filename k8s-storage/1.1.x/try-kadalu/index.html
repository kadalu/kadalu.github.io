

<!DOCTYPE HTML>
<html lang="en">
    <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charSet="utf-8"/>
    <title></title>
    <link rel="stylesheet" href="/static/css/bulma-0.9.4.min.css">
    <link rel="stylesheet" href="/static/css/stylesheet.css">
    <link rel="stylesheet" href="/static/css/syntax-highlight-emacs.css">
    <script defer src="/static/alpinejs.persist-3.10.5.min.js"></script>
    <script defer src="/static/alpinejs-3.10.5.min.js"></script>

    <meta name="generator" content="Nanoc 4.12.1">
    
<link href="/favicon.ico" rel="icon" type="image/x-icon" />
<link rel="apple-touch-icon" href="/favicon.ico" />
<meta name="generator" content="Nanoc 4.12.1">
<meta property="og:title" content=""/>
<meta name="author" content=""/>
<meta property="og:locale" content="en_US"/>
<meta name="description" content=""/>
<meta property="og:description" content=""/>
<link rel="canonical" href="/k8s-storage/1.1.x/try-kadalu/"/>
<meta property="og:url" content="/k8s-storage/1.1.x/try-kadalu/"/>
<meta property="og:site_name" content="Kadalu"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content=""/>

<meta name="twitter:card" content="summary"/>
<meta name="twitter:image" content="https://kadalu.tech/images/logo-icon-spaced.png"/>
<meta property="og:image" content="https://kadalu.tech/images/logo-icon-spaced.png"/>

<meta name="twitter:site" content="https://kadalu.tech"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content=""/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />


    <script defer data-domain="docs.kadalu.tech" src="https://plausible.io/js/script.js"></script>
</head>

    <body>
        <div id="main" x-data="{version: '1.1.x', menuShow: true}">
            <nav class="navbar pr-4" role="navigation" aria-label="main navigation" x-data="{showing: false}">
    <div class="navbar-brand has-text-left">
        <a class="navbar-item" href="/">
            <span class="has-text-primary is-size-4">kadalu</span><span class="has-text-grey is-size-4 ml-1">DOCS</span>
        </a>

        <!-- <div class="field">
             <p class="control has-icons-left mx-2 mt-4">
             <input class="input" type="text" placeholder="Search">
             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="icon is-small is-left pl-1" style="width: 1.5em">
             <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" />
             </svg>
             </p>
             </div> -->

        <a role="button" class="navbar-burger" aria-label="menu" :class="showing ? 'is-active' : ''" aria-expanded="false" @click="showing = !showing">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        
    </div>

    <div class="navbar-end" x-show="showing">
        <a class="navbar-item" href="https://kadalu.tech">
            kadalu.tech
        </a>
    </div>
    <div class="navbar-end is-hidden-touch">
        <a class="navbar-item" href="https://kadalu.tech">
            kadalu.tech
        </a>
    </div>
</nav>

            <div class="tabs is-small mb-0">
                <ul>
                    
                    <li class="">
                        <a href="/kadalu-storage/latest" class="mb-0">
                            <span>Kadalu Storage</span>
                        </a>
                    </li>
                    
                    <li class="is-active">
                        <a href="/k8s-storage/latest" class="mb-0">
                            <span>Kadalu Storage (Kubernetes Native)</span>
                        </a>
                    </li>
                    
                    <li class="">
                        <a href="/console/latest" class="mb-0">
                            <span>Kadalu Storage Console</span>
                        </a>
                    </li>
                    
                    <li class="">
                        <a href="/binnacle/latest" class="mb-0">
                            <span>Binnacle</span>
                        </a>
                    </li>
                    
                </ul>
            </div>
            <div class="is-flex" x-data="{menuShow: $persist(true), headings: document.getElementsByClassName('heading')}">
                <div class="is-flex-grow-0 is-flex-shrink-0 has-background-info-light" style="overflow-x: hidden;transition: all 200ms ease-in-out;" :style="{'flex-basis': menuShow ? '230px' : '0'}">
                    <aside class="menu mb-4" :class="menuShow ? 'px-4' : 'px-6'">
                        
                        <p class="menu-label mt-4">
                            User Guide
                        </p>
                        <ul class="menu-list">
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/quick-start/">Quick Start</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/quick-start-yaml/">Quick Start YAML</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/introduction/">Introduction</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/setup/">Setup</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/using-with-private-container-registry/">Using with Private Container Registry</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/setup-storage/">Setup Storage</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/csi-to-claim-persistent-volumes/">CSI to claim Persistent Volumes</a></li>
                            
                            
                            <li class=""><a class="is-active" href="/k8s-storage/1.1.x/try-kadalu/">Try Kadalu</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/external-gluster-storage/">External Gluster Storage</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/storage-config-options/">Storage Config Options</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/block-volume/">Block Volume</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/storage-classes/">Storage Classes</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/troubleshooting/">Troubleshooting</a></li>
                            
                        </ul>
                        
                        <p class="menu-label mt-4">
                            Use cases
                        </p>
                        <ul class="menu-list">
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/running-a-webserver/">Running a Webserver</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/running-minio/">Running Minio</a></li>
                            
                        </ul>
                        
                        <p class="menu-label mt-4">
                            Articles
                        </p>
                        <ul class="menu-list">
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/how-it-works?/">How it works?</a></li>
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/gluster-and-kadalu/">Gluster and Kadalu</a></li>
                            
                        </ul>
                        
                        <p class="menu-label mt-4">
                            Developer Guide
                        </p>
                        <ul class="menu-list">
                            
                            
                            <li class=""><a class="" href="/k8s-storage/1.1.x/get-involved/">Get Involved</a></li>
                            
                        </ul>
                        
                    </aside>
                </div>
                <div class="is-flex-grow-0 is-flex-shrink-0 has-background-info-light has-text-right" style="flex-basis: 20px; position:relative" @click="menuShow = !menuShow">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" x-show="menuShow" class="icon is-clickable" style="position: sticky; top:2px">
                        <path fill-rule="evenodd" d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z" clip-rule="evenodd" />
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" x-show="!menuShow" class="icon is-clickable" style="position: sticky; top:2px">
                        <path fill-rule="evenodd" d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="is-flex-grow-1 is-flex-shrink-1">
                    <div class="px-6 mt-4 mb-6 content is-flex" id="main-content">
                        <div class="is-flex-grow-1 is-flex-shrink-1">
                            <div class="p-2 has-text-right mb-6">
                                <span>Version</span>
                                <div class="select is-small is-rounded">
                                    <select x-model="version" style="width: 100%" @change="window.location=`/k8s-storage/${version}`">
                                        <option>latest</option>
                                        
                                        <option>1.1.x</option>
                                        
                                        <option>1.0.x</option>
                                        
                                        <option>devel</option>
                                        
                                    </select>
                                </div>
                            </div>
                            <div class="doc-content">
                                <h1>Try Kadalu</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>We believe the success of a project depends on  how easy it is for a developer
or an user to try out the project, get a hang of it.</p>
</div>
<div class="paragraph">
<p>As part of that, we have decided the overall install process of the storage
system should be 2 step process.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get the operator installed, which sets up required configmap, CSI drivers,
and CRD details.</p>
</li>
<li>
<p>Provide inventory (ie, machine:disk combination) to the system, so it can
setup storage subsystem on it.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the initial versions, we would like to keep the 2nd step manual, ie, admin
has to provide details of storage. Later, we can enhance it to pick the
storage based on the tag etc. If it is cloud, with required auth keys,
it can setup the Storage within operator itself.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_give_it_a_try_with_minikube">Give it a try with 'minikube'</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://kubernetes.io/docs/setup/minikube/">minikube</a> is a good way to get a hang of k8s for beginners. If you already have a k8s setup available to test out, skip this step, and goto <a href="#try-kadalu">Next step</a></p>
</div>
<div class="paragraph">
<p>You can follow <a href="https://kubernetes.io/docs/tasks/tools/install-minikube/">Install minikube</a> document to setup minikube. Please note that if you are using <code>minikube version</code> below 1.17.0, use <code>--vm-driver=none</code> option. More on this issue is recorded at <a href="https://github.com/kadalu/kadalu/issues/351">kadalu/issue#351</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_try_kadalu">Try kadalu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For testing, login to minikube and create a virtual device as below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">$</span><span class="w"> </span><span class="nb">cd</span> /mnt/vda1/
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo truncate</span> <span class="nt">-s</span> 10G storage-pool-1.disk.img</code></pre>
</div>
</div>
<div class="paragraph">
<p>After this follow our <a href="https://github.com/kadalu/kadalu">Homepage</a>. You are good to get started.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_further_considerations">Further considerations</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_what_do_we_do_when_we_have_more_storage_nodes">What do we do when we have more storage nodes?</h3>
<div class="paragraph">
<p>We understand many examples given are for setting up it on 1 node, 1 device. When you have more storage you need to export, then just export more storage in the multiple of Replica count.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="c1"># File: storage-config.yaml</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kadalu-operator.storage/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">KadaluStorage</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="c1"># This will be used as name of PV Hosting Volume</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">storage-pool-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">Replica1</span>
  <span class="na">storage</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube1</span>        <span class="c1"># node name as shown in `kubectl get nodes`</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdc</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube2</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdd</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube3</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdc</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you are using kadalu versions below 0.8.0, then please refer to document on 0.7.7 version.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_configure_kadalu_to_have_at_least_one_mirroring_data_in_case_of_some_crash">how to configure kadalu to have at least one mirroring data in case of some crash?</h3>
<div class="paragraph">
<p>The answer we have is, providing kadalu-config using 3 nodes, and using gluster replicate module (replica 3). The sample looks something like below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><span class="c1"># File: storage-config.yaml</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">kadalu-operator.storage/v1alpha1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">KadaluStorage</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="c1"># This will be used as name of PV Hosting Volume</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">storage-replica-pool-1</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">Replica3</span>  <span class="c1"># Notice that this field tells kadalu operator to use replicate module.</span>
  <span class="na">storage</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube1</span>      <span class="c1"># node name as shown in `kubectl get nodes`</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdc</span> <span class="c1"># Device to provide storage to all PV</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube2</span>      <span class="c1"># node name as shown in `kubectl get nodes`</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdd</span> <span class="c1"># Device to provide storage to all PV</span>
    <span class="pi">-</span> <span class="na">node</span><span class="pi">:</span> <span class="s">kube3</span>      <span class="c1"># node name as shown in `kubectl get nodes`</span>
      <span class="na">device</span><span class="pi">:</span> <span class="s">/dev/vdc</span> <span class="c1"># Device to provide storage to all PV</span>
<span class="nn">---</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With this, there will be 3 bricks, and kadalu CSI driver will mount the corresponding volume and provide data.</p>
</div>
<div class="paragraph">
<p><strong>NOTE</strong>: There can be both replica1 and replica3 type volume co-existing in
the system. Note that while claiming the PV, you just need to provide relavant
storageClassName as <code>storageClassName: kadalu.&lt;name_of_storage_pool&gt;</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_on_data_recovery">On data recovery</h3>
<div class="paragraph">
<p>As we use glusterfs as storage backend, without any sharding/striping mode, the data remains as is, on your backend storage. Just that each PV would be a subdirectory on your storage. So, no need to panic.</p>
</div>
</div>
<div class="sect2">
<h3 id="_on_upgrade">On upgrade</h3>
<div class="paragraph">
<p>As long as glusterfs promises to keep the backend layout same, and continue to provide storage after upgrade, we don&#8217;t see any issue with upgrade. Currently one known issue is that our operator is not checking for heal pending count while upgrading storage pods.</p>
</div>
</div>
<div class="sect2">
<h3 id="_gluster_and_kadalu">Gluster and Kadalu</h3>
<div class="paragraph">
<p>We have compiled a list of things <a href="/k8s-storage/1.1.x/gluster-and-kadalu">here</a></p>
</div>
</div>
</div>
</div>
                            </div>
                        </div>
                        <div class="p-4 is-flex-grow-1 is-flex-shrink-1 is-hidden-touch" x-data="{headings: document.getElementById('main-content').getElementsByTagName('h2')}" style="position:relative">
                            <div style="position: sticky;top:20px">
                                <h4 x-show="headings.length > 0" class="is-size-6 has-text-grey">ON THIS PAGE</h4>
                                <template x-for="heading in headings">
                                    <a class="is-block mb-2" :href="`#${heading.id}`" x-text="heading.textContent"></a>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer has-background-primary has-text-white pt-6">
    <div class="columns">
        <div class="column">
            <h2 class="has-font-weight-semibold is-size-5 is-underlined py-2">Community</h2>
            <a class="is-block has-text-white" target="_blank" href="https://join.slack.com/t/kadalu/shared_invite/enQtNzg1ODQ0MDA5NTM2LWMzMTc5ZTJmMjk4MzI0YWVhOGFlZTJjZjY5MDNkZWI0Y2VjMDBlNzVkZmI1NWViN2U3MDNlNDJhNjE5OTBlOGU">Community Slack</a>
            <a class="is-block has-text-white" target="_blank" href="https://github.com/kadalu">Github</a>
            <a class="is-block has-text-white" target="_blank" href="https://kadalu.tech">kadalu.tech</a>
        </div>
    </div>
    <div class="has-text-centered mt-6">
        Copyright &copy; 2022 Kadalu Technologies Private Limited.
    </div>
</div>

        </div>
    </body>
</html>
